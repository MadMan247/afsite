<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script defer src="https://analytics.edsmcserv.com/script.js" data-website-id="e331402a-10ae-4030-b5d0-14d2eae72744"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="/fuckyou/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/fuckyou/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/fuckyou/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="description" content="List of Acid Fog-related Articles">
    <link rel="stylesheet" type="text/css" href="/articles/articles.css">
    <link rel="stylesheet" type="text/css" href="/global/index.css">

    <link rel="mask-icon" href="/fuckyou/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00a300">
    <meta name="theme-color" content="#ffffff">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acid Fog Articles</title>
    <script src="/global/adlink.js"></script>
    <script defer src="/prefetch.js"></script>

    <script>
        (function() {
            'use strict';

            /**
             * Checks if the browser lacks certain modern features OR has a specific legacy UA string.
             * @returns {boolean} True if the browser appears to be legacy, false otherwise.
             */
            function isLegacyBrowser() {
                console.log("Performing legacy browser check...");

                // --- Part 1: Feature Detection (Catches generally older browsers) ---

                // 1. Check for fundamental ES6 features
                if (typeof Promise === 'undefined' || typeof Map === 'undefined' || typeof Set === 'undefined') {
                    console.log("Legacy Reason: Missing Promise, Map, or Set.");
                    return true;
                }

                // 2. Check for fetch API
                if (typeof fetch === 'undefined') {
                    console.log("Legacy Reason: Missing fetch API.");
                    return true;
                }

                // 3. Check for newer JS syntax support
                try {
                    new Function('async () => {}');
                    new Function('const obj = {}; return obj?.prop;');
                    new Function('const val = null; return val ?? "default";')();
                } catch (e) {
                    console.log("Legacy Reason: Syntax error testing modern JS features.", e.message);
                    return true;
                }

                // --- Part 2: Specific User Agent Sniffing (Targets Pale Moon/SeaMonkey) ---
                // WARNING: UA sniffing is less reliable than feature detection, but necessary here.
                try {
                    // Get the user agent string (provide fallbacks for unusual environments)
                    const ua = navigator.userAgent || navigator.vendor || window.opera;

                    // Check if the UA string contains "PaleMoon" or "SeaMonkey" (case-insensitive)
                    if (ua && /PaleMoon|SeaMonkey/i.test(ua)) {
                        console.log("Legacy Reason: Explicit User Agent match (PaleMoon or SeaMonkey).");
                        return true; // Force legacy for these specific UAs
                    }
                } catch (e) {
                    // Log an error if we can't even access the userAgent (highly unlikely in browsers)
                    console.warn("Could not access User Agent string for legacy check:", e);
                }


                // --- Conclusion ---
                // If none of the above conditions triggered, assume it's modern enough.
                console.log("Browser appears modern (passed feature checks and UA sniff).");
                return false;
            }

            /**
             * Creates a <script> tag and appends it to the <head>.
             * @param {string} src The URL of the script to load.
             */
            function loadScript(src) {
                console.log('Injecting script:', src);
                var script = document.createElement('script');
                script.src = src;
                script.defer = true; // Or async=true, or remove both as needed
                script.type = "module";
                document.head.appendChild(script);
            }

            // --- Main Execution ---
            if (isLegacyBrowser()) {
                loadScript('/articles/articles-legacy.js');
            } else {
                loadScript('/articles/articles.js');
            }

        })();
    </script>
</head>
<body>

<div class="container">
<header>
    <h1>Acid Fog Article List</h1>

        <nav>
            <script type="module" src="/global/NavBar.js"></script>
            <!-- I made the nav a component Edward, check /global/NavBar.js -->
        </nav>

</header>
<main>
    <!-- Floating Themed Scroll-to-Top Button -->
    <button id="scroll-to-top-btn" style="
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 3.5rem;
    height: 3.5rem;
    border-radius: 50%;
    border: none;
    background-color: var(--gradient-drk);
    color: var(--text);
    box-shadow: 0 4px 4px rgba(41, 188, 37, 0.4);
    cursor: pointer;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    ">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
             stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
            <line x1="12" y1="19" x2="12" y2="5" />
            <polyline points="5 12 12 5 19 12" />
        </svg>
    </button>

    <div id="article-list" class="article-list">
        <!-- Should get dumped here :) -->
    </div>

    <hr/>

    <div class="article-container" id="article-container">

        <div id="current-article" class="current-article">
        </div>

    </div>
</main>
</div>

</div>
</body>
<script defer src="../global/index.js"></script>
</html>

